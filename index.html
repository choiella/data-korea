<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전국 시도별 인플루엔자 접종 현황</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        #chart-container {
            width: 90%;
            height: 600px;
            background-color: #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            border-radius: 12px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div id="chart-container"></div>
    <script>
        var chartDom = document.getElementById('chart-container');
        var myChart = echarts.init(chartDom);
        var option;

        // 시도별 인플루엔자 접종 인구 데이터 (가공된 값)
        const vaccinationData = [
            { name: '경기', value: 2500000 },
            { name: '서울', value: 1500000 },
            { name: '경남', value: 900000 },
            { name: '경북', value: 850000 },
            { name: '부산', value: 800000 },
            { name: '인천', value: 750000 },
            { name: '전남', value: 700000 },
            { name: '대구', value: 650000 },
            { name: '충남', value: 600000 },
            { name: '대전', value: 550000 },
            { name: '전북', value: 550000 },
            { name: '충북', value: 500000 },
            { name: '강원', value: 450000 },
            { name: '광주', value: 400000 },
            { name: '울산', value: 300000 },
            { name: '제주', value: 250000 },
            { name: '세종', value: 100000 }
        ];

        // 인구수에 따라 정렬하여 시각적으로 더 명확하게 배치
        vaccinationData.sort((a, b) => b.value - a.value);

        // 버블 크기 스케일 조정 (최소, 최대 크기)
        const minVal = vaccinationData[vaccinationData.length - 1].value;
        const maxVal = vaccinationData[0].value;
        const sizeScale = (value) => {
            const minSize = 20;
            const maxSize = 150;
            if (maxVal === minVal) return (minSize + maxSize) / 2;
            return minSize + (maxSize - minSize) * (value - minVal) / (maxVal - minVal);
        };

        option = {
            title: {
                text: '전국 시도별 인플루엔자 접종 현황',
                subtext: '버블 크기는 접종 인구수에 비례',
                left: 'center',
                textStyle: {
                    color: '#333'
                }
            },
            tooltip: {
                trigger: 'item',
                formatter: function (params) {
                    return `<b>${params.name}</b><br/>접종 인구수: ${params.value.toLocaleString()}명`;
                }
            },
            grid: {
                show: true,
                left: 'center',
                top: 'middle',
                containLabel: true,
                width: '80%',
                height: '80%',
                backgroundColor: 'rgba(255, 255, 255, 0)'
            },
            xAxis: { show: false },
            yAxis: { show: false },
            series: [{
                name: '접종 인구',
                type: 'scatter',
                // 버블 배치: 인구수가 많은 지역을 중앙에 배치하고 나머지는 주변에 원형으로 배치
                data: vaccinationData.map((item, index) => ({
                    name: item.name,
                    value: item.value,
                    symbolSize: sizeScale(item.value),
                    itemStyle: {
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [
                            { offset: 0, color: '#f77373' },
                            { offset: 1, color: '#cf2d2d' }
                        ]),
                        shadowBlur: 10,
                        shadowColor: 'rgba(0,0,0,0.3)'
                    }
                })),
                label: {
                    show: true,
                    formatter: '{b}',
                    position: 'inside',
                    color: '#fff',
                    fontWeight: 'bold',
                    fontSize: 14
                },
                layout: 'none', // 수동으로 위치 지정 (Force Layout으로 원하는 위치에 배치)
                // Force Layout을 사용하여 인구수에 비례한 힘으로 배치
                force: {
                    repulsion: 300,
                    gravity: 0.05,
                    edgeLength: 100,
                    layoutAnimation: true,
                },
                draggable: 'true'
            }]
        };
        
        myChart.setOption(option, true);
    </script>
</body>
</html>